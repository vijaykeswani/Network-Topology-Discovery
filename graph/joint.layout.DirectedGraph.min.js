/*! Joint v0.6.0 - JavaScript diagramming library  2013-07-27 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
(function(){function t(t){var e={};return t.forEach(function(t,i){e[t]=i}),e}function i(t,e){Object.keys(t).forEach(function(i){e[i]=t[i]})}function n(t){return Math.min.apply(null,t)}function r(t){return Math.max.apply(null,t)}function o(t){return Array.prototype.concat.apply([],t)}function s(t){return Object.keys(t).map(function(e){return t[e]})}function a(t){for(var e={},i=0;t.length>i;++i)for(var n=t[i],r=0;n.length>r;++r){var o=n[r];e[o]=o}var s=[];for(var a in e)s.push(e[a]);return s}function l(t,e,i,n){return function(r){return arguments.length?(e[i]=r,n&&n(r),t):e[i]}}function c(){function t(e){var n=u,r=2*e,o=r+1,s=e;n.length>r&&(s=n[r].pri<n[s].pri?r:s,n.length>o&&(s=n[o].pri<n[s].pri?o:s),s!==e&&(i(e,s),t(s)))}function e(t){for(var e,n=u,r=n[t].pri;t>0&&(e=t>>1,!(r>n[e].pri));)i(t,e),t=e}function i(t,e){var i=u,n=h,r=i[t];i[t]=i[e],i[e]=r,n[i[t].key]=t,n[i[e].key]=e}function n(){return u.length}function r(){return Object.keys(h)}function o(t){return t in h}function s(t){var e=h[t];return void 0!==e?u[e].pri:void 0}function a(t,i){if(!(t in h)){var n={key:t,pri:i},r=u.length;return h[t]=r,u.push(n),e(r),!0}return!1}function l(){return n()>0?u[0].key:void 0}function c(){i(0,u.length-1);var e=u.pop();return delete h[e.key],t(0),e.key}function A(t,i){var n=h[t];if(i>u[n].pri)throw Error("New priority is greater than current priority. Key: "+t+" Old: "+u[n].pri+" New: "+i);u[n].pri=i,e(n)}var u=[],h={};return{size:n,keys:r,has:o,priority:s,add:a,min:l,removeMin:c,decrease:A}}dagre={},dagre.version="0.0.6",dagre.graph={},dagre.graph=function(){function t(t,e,i){var n=t[e];n||(n=t[e]={count:0,edges:{}}),n.count++,n.edges[i]=!0}function e(t,e,i){var n=t[e];0===--n.count?delete t[e]:delete n.edges[i]}function i(t){var e=r[t];if(!(t in r))throw Error("Node '"+t+"' is not in graph:\n"+(""+u));return e}function n(t){var e=A[t];if(!e)throw Error("Edge '"+t+"' is not in graph:\n"+(""+u));return e}var r={},l={},c={},A={},u={},h=0;return u.addNode=function(t,e){if(u.hasNode(t))throw Error("Graph already has node '"+t+"':\n"+(""+u));r[t]={id:t,value:e},l[t]={},c[t]={}},u.delNode=function(t){i(t),u.edges(t).forEach(function(t){u.delEdge(t)}),delete l[t],delete c[t],delete r[t]},u.node=function(t){return i(t).value},u.hasNode=function(t){return t in r},u.addEdge=function(e,n,r,o){if(i(n),i(r),null===e)e="_ANON-"+ ++h;else if(u.hasEdge(e))throw Error("Graph already has edge '"+e+"':\n"+(""+u));A[e]={id:e,source:n,target:r,value:o},t(l[r],n,e),t(c[n],r,e)},u.delEdge=function(t){var i=n(t);e(l[i.target],i.source,t),e(c[i.source],i.target,t),delete A[t]},u.edge=function(t){return n(t).value},u.source=function(t){return n(t).source},u.target=function(t){return n(t).target},u.hasEdge=function(t){return t in A},u.successors=function(t){return i(t),d(c[t]).map(function(t){return r[t].id})},u.predecessors=function(t){return i(t),d(l[t]).map(function(t){return r[t].id})},u.neighbors=function(t){i(t);var e={};return d(c[t]).map(function(t){e[t]=!0}),d(l[t]).map(function(t){e[t]=!0}),d(e).map(function(t){return r[t].id})},u.nodes=function(){var t=[];return u.eachNode(function(e){t.push(e)}),t},u.eachNode=function(t){for(var e in r){var i=r[e];t(i.id,i.value)}},u.edges=function(t,e){var n,r;return arguments.length?1===arguments.length?a([u.inEdges(t),u.outEdges(t)]):2===arguments.length?(i(t),i(e),r=c[t],n=e in r?d(r[e].edges):[],n.map(function(t){return A[t].id})):void 0:(n=[],u.eachEdge(function(t){n.push(t)}),n)},u.eachEdge=function(t){for(var e in A){var i=A[e];t(i.id,i.source,i.target,i.value)}},u.inEdges=function(t){return i(t),o(s(l[t]).map(function(t){return d(t.edges)}))},u.outEdges=function(t){return i(t),o(s(c[t]).map(function(t){return d(t.edges)}))},u.subgraph=function(t){var e=dagre.graph();return t.forEach(function(t){e.addNode(t,u.node(t))}),s(A).forEach(function(t){e.hasNode(t.source)&&e.hasNode(t.target)&&e.addEdge(t.id,t.source,t.target,u.edge(t.id))}),e},u.toString=function(){var t="GRAPH:\n";return t+="    Nodes:\n",d(r).forEach(function(e){t+="        "+e+": "+JSON.stringify(r[e].value)+"\n"}),t+="    Edges:\n",d(A).forEach(function(e){var i=A[e];t+="        "+e+" ("+i.source+" -> "+i.target+"): "+JSON.stringify(A[e].value)+"\n"}),t},u},dagre.layout=function(){function t(){function t(t,n){var r=n[t].dagre.id;if(!i.hasNode(r))throw Error(t+" node for '"+e+"' not in node list");return r}var i=dagre.graph(),n=0;return a.nodes.forEach(function(t){var e="id"in t?t.id:"_N"+n++;t.dagre={id:e,width:t.width,height:t.height},i.addNode(e,t.dagre)}),a.edges.forEach(function(e){var r=t("source",e),o=t("target",e);if(e.dagre={points:[]},r!==o){var s="id"in e?e.id:"_E"+n++;e.dagre.id=s,e.dagre.minLen=e.minLen||1,e.dagre.width=e.width||0,e.dagre.height=e.height||0,i.addEdge(s,r,o,e.dagre)}}),i}function i(){var e=f.rankSep();try{if(!a.nodes.length)return;var i=t();i.eachEdge(function(t,e,i,n){n.minLen*=2}),f.rankSep(e/2),A.run(i),u.run(i),n(i),h.run(i),d.run(i),r(i),o(i),A.undo(i)}finally{f.rankSep(e)}return f}function n(t){var e=0;t.eachEdge(function(i,n,r,o){var s=t.node(n).rank,a=t.node(r).rank;if(a>s+1){for(var l=n,c=s+1,A=0;a>c;++c,++A){var u="_D"+ ++e,h={width:o.width,height:o.height,edge:{id:i,source:n,target:r,attrs:o},rank:c,dummy:!0};0===A?h.index=0:c+1===a&&(h.index=1),t.addNode(u,h),t.addEdge(null,l,u,{}),l=u}t.addEdge(null,l,r,{}),t.delEdge(i)}})}function r(t){t.eachNode(function(e,i){if(i.dummy&&"index"in i){var n=i.edge;t.hasEdge(n.id)||t.addEdge(n.id,n.source,n.target,n.attrs);var r=t.edge(n.id).points;r[i.index]={x:i.x,y:i.y,ul:i.ul,ur:i.ur,dl:i.dl,dr:i.dr},t.delNode(e)}})}function o(t){t.eachEdge(function(t,e,i,n){n.reversed&&n.points.reverse()})}function s(t){return function(){return arguments.length?(t.apply(null,arguments),f):t()}}var a={nodes:[],edges:[],debugLevel:0},c=p(),A=dagre.layout.acyclic(),u=dagre.layout.rank(),h=dagre.layout.order(),d=dagre.layout.position(),f={};return f.nodes=l(f,a,"nodes"),f.edges=l(f,a,"edges"),f.orderIters=s(h.iterations),f.nodeSep=s(d.nodeSep),f.edgeSep=s(d.edgeSep),f.universalSep=s(d.universalSep),f.rankSep=s(d.rankSep),f.rankDir=s(d.rankDir),f.debugAlignment=s(d.debugAlignment),f.debugLevel=l(f,a,"debugLevel",function(t){c.enabled(t),A.debugLevel(t),u.debugLevel(t),h.debugLevel(t),d.debugLevel(t)}),f.run=c.wrap("Total layout",i),f._normalize=n,f},dagre.layout.acyclic=function(){function t(t){function i(e){e in r||(r[e]=n[e]=!0,t.outEdges(e).forEach(function(r){var s,a=t.target(r);a in n?(s=t.edge(r),t.delEdge(r),s.reversed=!0,++o,t.addEdge(r,a,e,s)):i(a)}),delete n[e])}var n={},r={},o=0;t.eachNode(function(t){i(t)}),e.debugLevel>=2&&console.log("Acyclic Phase: reversed "+o+" edge(s)")}var e={debugLevel:0},i=p(),n={};return n.debugLevel=l(n,e,"debugLevel",function(t){i.enabled(t)}),n.run=i.wrap("Acyclic Phase",t),n.undo=function(t){t.eachEdge(function(e,i,n,r){r.reversed&&(delete r.reversed,t.delEdge(e),t.addEdge(e,n,i,r))})},n},dagre.layout.rank=function(){function t(t){e(t),f(t).forEach(function(e){var n=t.subgraph(e);i(n),r(n)})}function e(t){var e={},i=c();for(t.eachNode(function(n){i.add(n,t.inEdges(n).length),e[n]=0});i.size()>0;){var n=i.min();if(i.priority(n)>0)throw Error("Input graph is not acyclic: "+(""+t));i.removeMin();var r=e[n];t.node(n).rank=r,t.outEdges(n).forEach(function(n){var o=t.target(n);e[o]=Math.max(e[o],r+(t.edge(n).minLen||1)),i.decrease(o,i.priority(o)-1)})}}function i(t){function e(s,a){r[s]=!0,t.node(s).rank=a,n[s].forEach(function(n){if(!(n in r)){var l=i[o(s,n)];e(n,a+(t.edges(s,n).length?l:-l))}})}var i={};t.eachEdge(function(t,e,n,r){var s=o(e,n);i[s]=Math.max(i[s]||1,r.minLen||1)});var n=dagre.util.prim(t,function(e,n){return Math.abs(t.node(e).rank-t.node(n).rank)-i[o(e,n)]}),r={};return e(t.nodes()[0],0),n}function r(t){var e=n(t.nodes().map(function(e){return t.node(e).rank}));t.eachNode(function(t,i){i.rank-=e})}function o(t,e){return e>t?t.length+":"+t+"-"+e:e.length+":"+e+"-"+t}var s={debugLevel:0},a=p(),A={};return A.debugLevel=l(A,s,"debugLevel",function(t){a.enabled(t)}),A.run=a.wrap("Rank Phase",t),A},dagre.layout.order=function(){function e(t){var e=i(t),n=c(e),r=A(t,e);u.debugLevel>=2&&console.log("Order phase start cross count: "+r);var s,a,l;for(a=0,l=0;4>l&&u.iterations>a;++a,++l)s=o(t,a,e),r>s&&(n=c(e),r=s,l=0),u.debugLevel>=3&&console.log("Order phase iter "+a+" cross count: "+r);return n.forEach(function(e){e.forEach(function(e,i){t.node(e).order=i})}),u.debugLevel>=2&&(console.log("Order iterations: "+a),console.log("Order phase best cross count: "+r)),n}function i(t){var e=[];return t.eachNode(function(t,i){var n=e[i.rank]||(e[i.rank]=[]);n.push(t)}),e}function n(t){return function(e){var i=[];return t.inEdges(e).forEach(function(e){i.push(t.source(e))}),i}}function r(t){return function(e){var i=[];return t.outEdges(e).forEach(function(e){i.push(t.target(e))}),i}}function o(e,i,o){var a;if(0===i%2)for(a=1;o.length>a;++a)s(o[a],n(e),t(o[a-1]));else for(a=o.length-2;a>=0;--a)s(o[a],r(e),t(o[a+1]));return A(e,o)}function s(e,i,n){var r=t(e),o=a(e,i,n),s=e.filter(function(t){return-1!==o[t]});s.sort(function(t,e){return o[t]-o[e]||r[t]-r[e]});for(var l=e.length-1;l>=0;--l)-1!==o[e[l]]&&(e[l]=s.pop())}function a(t,e,i){var n={};return t.forEach(function(t){var r=e(t),o=-1;r.length>0&&(o=h(r.map(function(t){return i[t]}))/r.length),n[t]=o}),n}function c(t){return t.map(function(t){return t.slice(0)})}var u={iterations:24,debugLevel:0},d=p(),f={};return f.iterations=l(f,u,"iterations"),f.debugLevel=l(f,u,"debugLevel",function(t){d.enabled(t)}),f.run=d.wrap("Order Phase",e),f};var A=dagre.layout.order.crossCount=function(t,e){var i,n=0;return e.forEach(function(e){i&&(n+=u(t,i,e)),i=e}),n},u=dagre.layout.order.bilayerCrossCount=function(e,i,n){var r=t(n),o=[];i.forEach(function(t){var i=[];e.outEdges(t).forEach(function(t){i.push(r[e.target(t)])}),i.sort(function(t,e){return t-e}),o=o.concat(i)});for(var s=1;n.length>s;)s<<=1;var a=2*s-1;s-=1;for(var l=[],c=0;a>c;++c)l[c]=0;var A=0;return o.forEach(function(t){var e=t+s;for(++l[e];e>0;)e%2&&(A+=l[e+1]),e=e-1>>1,++l[e]}),A};dagre.layout.position=function(){function t(t){var e=[];t.eachNode(function(t,i){var n=e[i.rank]||(e[i.rank]=[]);n[i.order]=t});var s=i(t,e),l={};["u","d"].forEach(function(i){"d"===i&&e.reverse(),["l","r"].forEach(function(n){"r"===n&&d(e);var r=i+n,c=o(t,e,s,"u"===i?"predecessors":"successors");l[r]=a(t,e,c.pos,c.root,c.align),"r"===n&&h(l[r]),"r"===n&&d(e)}),"d"===i&&e.reverse()}),u(t,e,l),t.eachNode(function(e){var i=[];for(var n in l)y(n,t,e,l[n][e]),i.push(l[n][e]);i.sort(function(t,e){return t-e}),v(t,e,(i[1]+i[2])/2)});var c=n(t.nodes().map(function(e){return v(t,e)-f(t,e)/2}));t.eachNode(function(e){v(t,e,v(t,e)-c)});var A=0;e.forEach(function(e){var i=r(e.map(function(e){return g(t,e)}));A+=i/2,e.forEach(function(e){x(t,e,A)}),A+=i/2+E.rankSep})}function e(t,e){return e>t?(""+t).length+":"+t+"-"+e:(""+e).length+":"+e+"-"+t}function i(t,i){var n={},r={};if(2>=i.length)return n;i[1].forEach(function(t,e){r[t]=e});for(var o=1;i.length-1>o;++o)for(var s=i[o],a=i[o+1],l=0,c=0,A=0;a.length>A;++A){var u=a[A];r[u]=A;var h=void 0;if(t.node(u).dummy){var d=t.predecessors(u)[0];t.node(d).dummy&&(h=r[d])}if(void 0===h&&A===a.length-1&&(h=s.length-1),void 0!==h){for(;A>=c;++c)t.predecessors(a[c]).forEach(function(t){var i=r[t];(l>i||i>h)&&(n[e(a[c],t)]=!0)});l=h}}return n}function o(t,i,n,r){var o={},s={},a={};return i.forEach(function(t){t.forEach(function(t,e){s[t]=t,a[t]=t,o[t]=e})}),i.forEach(function(i){var l=-1;i.forEach(function(i){var c,A=t[r](i);A.length>0&&(A.sort(function(t,e){return o[t]-o[e]}),c=(A.length-1)/2,A.slice(Math.floor(c),Math.ceil(c)+1).forEach(function(t){a[i]===i&&!n[e(t,i)]&&o[t]>l&&(a[t]=i,a[i]=s[i]=s[t],l=o[t])}))})}),{pos:o,root:s,align:a}}function a(t,e,i,n,r){function o(e){if(!(e in A)){A[e]=0;var s=e;do{if(i[s]>0){var u=n[c[s]];o(u),a[e]===e&&(a[e]=a[u]);var h=m(t,c[s])+m(t,s);a[e]!==a[u]?l[a[u]]=Math.min(l[a[u]]||Number.POSITIVE_INFINITY,A[e]-A[u]-h):A[e]=Math.max(A[e],A[u]+h)}s=r[s]}while(s!==e)}}var a={},l={},c={},A={};return e.forEach(function(t){t.forEach(function(e,i){a[e]=e,i>0&&(c[e]=t[i-1])})}),s(n).forEach(function(t){o(t)}),e.forEach(function(t){t.forEach(function(t){A[t]=A[n[t]];var e=l[a[t]];n[t]===t&&Number.POSITIVE_INFINITY>e&&(A[t]+=e)})}),A}function c(t,e,i){return n(e.map(function(t){var e=t[0];return i[e]}))}function A(t,e,i){return r(e.map(function(t){var e=t[t.length-1];return i[e]}))}function u(t,e,i){var n,r={},o={},s={},a=Number.POSITIVE_INFINITY;for(var l in i){var u=i[l];r[l]=c(t,e,u),o[l]=A(t,e,u);var h=o[l]-r[l];a>h&&(a=h,n=l)}["u","d"].forEach(function(t){["l","r"].forEach(function(e){var i=t+e;s[i]="l"===e?r[n]-r[i]:o[n]-o[i]})});for(var l in i)t.eachNode(function(t){i[l][t]+=s[l]})}function h(t){for(var e in t)t[e]=-t[e]}function d(t){t.forEach(function(t){t.reverse()})}function f(t,e){switch(E.rankDir){case"LR":return t.node(e).height;default:return t.node(e).width}}function g(t,e){switch(E.rankDir){case"LR":return t.node(e).width;default:return t.node(e).height}}function m(t,e){if(null!==E.universalSep)return E.universalSep;var i=f(t,e),n=t.node(e).dummy?E.edgeSep:E.nodeSep;return(i+n)/2}function v(t,e,i){switch(E.rankDir){case"LR":if(3>arguments.length)return t.node(e).y;t.node(e).y=i;break;default:if(3>arguments.length)return t.node(e).x;t.node(e).x=i}}function y(t,e,i,n){switch(E.rankDir){case"LR":if(3>arguments.length)return e.node(i)[t];e.node(i)[t]=n;break;default:if(3>arguments.length)return e.node(i)[t];e.node(i)[t]=n}}function x(t,e,i){switch(E.rankDir){case"LR":if(3>arguments.length)return t.node(e).x;t.node(e).x=i;break;default:if(3>arguments.length)return t.node(e).y;t.node(e).y=i}}var E={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},C=p(),b={};return b.nodeSep=l(b,E,"nodeSep"),b.edgeSep=l(b,E,"edgeSep"),b.universalSep=l(b,E,"universalSep"),b.rankSep=l(b,E,"rankSep"),b.rankDir=l(b,E,"rankDir"),b.debugLevel=l(b,E,"debugLevel",function(t){C.enabled(t)}),b.run=C.wrap("Position Phase",t),b},dagre.util={};var h=dagre.util.sum=function(t){return t.reduce(function(t,e){return t+e},0)},d=dagre.util.keys=Object.keys,f=dagre.util.components=function(t){function e(i,r){i in n||(n[i]=!0,r.push(i),t.neighbors(i).forEach(function(t){e(t,r)}))}var i=[],n={};return t.eachNode(function(t){var n=[];e(t,n),n.length>0&&i.push(n)}),i};dagre.util.prim=function(t,e){var i={},n={},r=c();if(0===t.nodes().length)return i;t.eachNode(function(t){r.add(t,Number.POSITIVE_INFINITY),i[t]=[]}),r.decrease(t.nodes()[0],0);for(var o,s=!1;r.size()>0;){if(o=r.removeMin(),o in n)i[o].push(n[o]),i[n[o]].push(o);else{if(s)throw Error("Input graph is not connected:\n"+(""+t));s=!0}t.neighbors(o).forEach(function(t){var i=r.priority(t);if(void 0!==i){var s=e(o,t);i>s&&(n[t]=o,r.decrease(t,s))}})}return i},dagre.util.intersectRect=function(t,e){var i,n,r=t.x,o=t.y,s=e.x-r,a=e.y-o,l=t.width/2,c=t.height/2;return Math.abs(a)*l>Math.abs(s)*c?(0>a&&(c=-c),i=0===a?0:c*s/a,n=c):(0>s&&(l=-l),i=l,n=0===s?0:l*a/s),{x:r+i,y:o+n}},dagre.util.pointStr=function(t){return t.x+","+t.y};var p=function(){var t={},e=!1;return t.enabled=function(i){return arguments.length?(e=i,t):e},t.wrap=function(t,i){return function(){var n=e?(new Date).getTime():null;try{return i.apply(null,arguments)}finally{n&&console.log(t+" time: "+((new Date).getTime()-n)+"ms")}}},t};dagre.dot={},dagre.dot.toGraph=function(t){function e(t,e){a.hasNode(t)||(a.addNode(t,A.get("node",{id:t})),void 0===a.node(t).label&&(a.node(t).label=t)),e&&i(e,a.node(t))}function n(t,e,n){var r=t+"-"+e,o=c[r];o||(o=c[r]=0),c[r]++;var s=n.id||r+"-"+o,l={};i(A.get("edge",n),l),i({id:s},l),a.addEdge(s,t,e,l)}function r(t){function e(t){r.push(t)}var i,n={},r=[];for(e(t);0!==r.length;)switch(i=r.pop(),i.type){case"node":n[i.id]=!0;break;case"edge":i.elems.forEach(e);break;case"subgraph":i.stmts.forEach(e)}return dagre.util.keys(n)}function o(t){var i=t.attrs;switch(t.type){case"node":e(t.id,i);break;case"edge":var s,a;t.elems.forEach(function(t){switch(o(t),t.type){case"node":a=[t.id];break;case"subgraph":a=r(t);break;default:throw Error("Unsupported type incident on edge: "+t.type)}s&&s.forEach(function(t){a.forEach(function(e){n(t,e,i),l&&n(e,t,i)})}),s=a});break;case"subgraph":A.enterSubGraph(),t.stmts.forEach(function(t){o(t)}),A.exitSubGraph();break;case"attr":A.set(t.attrType,i);break;default:throw Error("Unsupported statement type: "+t.type)}}var s=dot_parser.parse(t),a=dagre.graph(),l="graph"===s.type,c={},A={_default:{},get:function(t,e){if(this._default[t]!==void 0){var n={};return i(this._default[t],n),i(e,n),n}return e},set:function(t,e){this._default[t]=this.get(t,e)},enterSubGraph:function(){function t(){}t.prototype=this._default;var e=new t;this._default=e},exitSubGraph:function(){this._default=Object.getPrototypeOf(this._default)}};return s.stmts&&s.stmts.forEach(function(t){o(t)}),a},dagre.dot.toObjects=function(t){var e=dagre.dot.toGraph(t),i=e.nodes().map(function(t){return e.node(t)}),n=e.edges().map(function(t){var i=e.edge(t);return i.source=e.node(e.source(t)),i.target=e.node(e.target(t)),i});return{nodes:i,edges:n}},dot_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,i){function n(t){P>Q||(Q>P&&(P=Q,L=[]),L.push(t))}function r(){var t,i,r,s,a,l,c,A,u,h,d,f,p,g,m,v;for(g=Q,m=Q,t=[],i=j();null!==i;)t.push(i),i=j();if(null!==t)if(v=Q,i=B(),null!==i?(r=j(),null!==r?i=[i,r]:(i=null,Q=v)):(i=null,Q=v),i=null!==i?i:"",null!==i)if(r=S(),null!==r){for(s=[],a=j();null!==a;)s.push(a),a=j();if(null!==s)if(a=E(),a=null!==a?a:"",null!==a){for(l=[],c=j();null!==c;)l.push(c),c=j();if(null!==l)if(123===e.charCodeAt(Q)?(c="{",Q++):(c=null,0===N&&n('"{"')),null!==c){for(A=[],u=j();null!==u;)A.push(u),u=j();if(null!==A)if(u=o(),u=null!==u?u:"",null!==u){for(h=[],d=j();null!==d;)h.push(d),d=j();if(null!==h)if(125===e.charCodeAt(Q)?(d="}",Q++):(d=null,0===N&&n('"}"')),null!==d){for(f=[],p=j();null!==p;)f.push(p),p=j();null!==f?t=[t,i,r,s,a,l,c,A,u,h,d,f]:(t=null,Q=m)}else t=null,Q=m;else t=null,Q=m}else t=null,Q=m;else t=null,Q=m}else t=null,Q=m;else t=null,Q=m}else t=null,Q=m;else t=null,Q=m}else t=null,Q=m;else t=null,Q=m;else t=null,Q=m;return null!==t&&(t=function(t,e,i,n){return{type:e,id:i,stmts:n}}(g,t[2],t[4],t[8])),null===t&&(Q=g),t}function o(){var t,i,r,o,a,l,c,A,u,h,d;if(u=Q,h=Q,t=s(),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(59===e.charCodeAt(Q)?(r=";",Q++):(r=null,0===N&&n('";"')),r=null!==r?r:"",null!==r){for(o=[],d=Q,a=[],l=j();null!==l;)a.push(l),l=j();if(null!==a)if(l=s(),null!==l){for(c=[],A=j();null!==A;)c.push(A),A=j();null!==c?(59===e.charCodeAt(Q)?(A=";",Q++):(A=null,0===N&&n('";"')),A=null!==A?A:"",null!==A?a=[a,l,c,A]:(a=null,Q=d)):(a=null,Q=d)}else a=null,Q=d;else a=null,Q=d;for(;null!==a;){for(o.push(a),d=Q,a=[],l=j();null!==l;)a.push(l),l=j();if(null!==a)if(l=s(),null!==l){for(c=[],A=j();null!==A;)c.push(A),A=j();null!==c?(59===e.charCodeAt(Q)?(A=";",Q++):(A=null,0===N&&n('";"')),A=null!==A?A:"",null!==A?a=[a,l,c,A]:(a=null,Q=d)):(a=null,Q=d)}else a=null,Q=d;else a=null,Q=d}null!==o?t=[t,i,r,o]:(t=null,Q=h)}else t=null,Q=h;else t=null,Q=h}else t=null,Q=h;return null!==t&&(t=function(t,e,i){for(var n=[e],r=0;i.length>r;++r)n.push(i[r][1]);return n}(u,t[0],t[3])),null===t&&(Q=u),t}function s(){var t;return t=a(),null===t&&(t=A(),null===t&&(t=u(),null===t&&(t=l(),null===t&&(t=c())))),t}function a(){var t,e,i,n,r;if(n=Q,r=Q,t=k(),null===t&&(t=C(),null===t&&(t=b())),null!==t){for(e=[],i=j();null!==i;)e.push(i),i=j();null!==e?(i=h(),null!==i?t=[t,e,i]:(t=null,Q=r)):(t=null,Q=r)}else t=null,Q=r;return null!==t&&(t=function(t,e,i){return{type:"attr",attrType:e,attrs:i||{}}}(n,t[0],t[2])),null===t&&(Q=n),t}function l(){var t,i,r,o,s,a,l;if(a=Q,l=Q,t=E(),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(61===e.charCodeAt(Q)?(r="=",Q++):(r=null,0===N&&n('"="')),null!==r){for(o=[],s=j();null!==s;)o.push(s),s=j();null!==o?(s=E(),null!==s?t=[t,i,r,o,s]:(t=null,Q=l)):(t=null,Q=l)}else t=null,Q=l;else t=null,Q=l}else t=null,Q=l;return null!==t&&(t=function(t,e,i){var n={};return n[e]=i,{type:"inlineAttr",attrs:n}}(a,t[0],t[4])),null===t&&(Q=a),t}function c(){var t,e,i,n,r;if(n=Q,r=Q,t=v(),null!==t){for(e=[],i=j();null!==i;)e.push(i),i=j();null!==e?(i=h(),i=null!==i?i:"",null!==i?t=[t,e,i]:(t=null,Q=r)):(t=null,Q=r)}else t=null,Q=r;return null!==t&&(t=function(t,e,i){return{type:"node",id:e,attrs:i||{}}}(n,t[0],t[2])),null===t&&(Q=n),t}function A(){var t,e,i,n,r,o,s;if(o=Q,s=Q,t=m(),null!==t){for(e=[],i=j();null!==i;)e.push(i),i=j();if(null!==e)if(i=p(),null!==i){for(n=[],r=j();null!==r;)n.push(r),r=j();null!==n?(r=h(),r=null!==r?r:"",null!==r?t=[t,e,i,n,r]:(t=null,Q=s)):(t=null,Q=s)}else t=null,Q=s;else t=null,Q=s}else t=null,Q=s;return null!==t&&(t=function(t,e,i,n){for(var r=[e],o=0;i.length>o;++o)r.push(i[o]);return{type:"edge",elems:r,attrs:n||{}}}(o,t[0],t[2],t[4])),null===t&&(Q=o),t}function u(){var t,i,r,s,a,l,c,A,u,h;if(c=Q,A=Q,u=Q,t=I(),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i){if(h=Q,r=E(),null!==r){for(s=[],a=j();null!==a;)s.push(a),a=j();null!==s?r=[r,s]:(r=null,Q=h)}else r=null,Q=h;r=null!==r?r:"",null!==r?t=[t,i,r]:(t=null,Q=u)}else t=null,Q=u}else t=null,Q=u;if(t=null!==t?t:"",null!==t)if(123===e.charCodeAt(Q)?(i="{",Q++):(i=null,0===N&&n('"{"')),null!==i){for(r=[],s=j();null!==s;)r.push(s),s=j();if(null!==r)if(s=o(),null!==s){for(a=[],l=j();null!==l;)a.push(l),l=j();null!==a?(125===e.charCodeAt(Q)?(l="}",Q++):(l=null,0===N&&n('"}"')),null!==l?t=[t,i,r,s,a,l]:(t=null,Q=A)):(t=null,Q=A)}else t=null,Q=A;else t=null,Q=A}else t=null,Q=A;else t=null,Q=A;return null!==t&&(t=function(t,e,i){return e=e[2]||[],{type:"subgraph",id:e[0],stmts:i}}(c,t[0],t[3])),null===t&&(Q=c),t}function h(){var t,e,i,n,r,o,s;if(r=Q,o=Q,t=d(),null!==t){for(e=[],s=Q,i=[],n=j();null!==n;)i.push(n),n=j();for(null!==i?(n=d(),null!==n?i=[i,n]:(i=null,Q=s)):(i=null,Q=s);null!==i;){for(e.push(i),s=Q,i=[],n=j();null!==n;)i.push(n),n=j();null!==i?(n=d(),null!==n?i=[i,n]:(i=null,Q=s)):(i=null,Q=s)}null!==e?t=[t,e]:(t=null,Q=o)}else t=null,Q=o;return null!==t&&(t=function(t,e,i){for(var n=e,r=0;i.length>r;++r)n=_(n,i[r][1]);return n}(r,t[0],t[1])),null===t&&(Q=r),t}function d(){var t,i,r,o,s,a,l;if(a=Q,l=Q,91===e.charCodeAt(Q)?(t="[",Q++):(t=null,0===N&&n('"["')),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(r=f(),r=null!==r?r:"",null!==r){for(o=[],s=j();null!==s;)o.push(s),s=j();null!==o?(93===e.charCodeAt(Q)?(s="]",Q++):(s=null,0===N&&n('"]"')),null!==s?t=[t,i,r,o,s]:(t=null,Q=l)):(t=null,Q=l)}else t=null,Q=l;else t=null,Q=l}else t=null,Q=l;return null!==t&&(t=function(t,e){return e}(a,t[2])),null===t&&(Q=a),t}function f(){var t,i,r,o,s,a,l,c,A;if(l=Q,c=Q,t=g(),null!==t){for(i=[],A=Q,r=[],o=j();null!==o;)r.push(o),o=j();if(null!==r)if(44===e.charCodeAt(Q)?(o=",",Q++):(o=null,0===N&&n('","')),o=null!==o?o:"",null!==o){for(s=[],a=j();null!==a;)s.push(a),a=j();null!==s?(a=g(),null!==a?r=[r,o,s,a]:(r=null,Q=A)):(r=null,Q=A)}else r=null,Q=A;else r=null,Q=A;for(;null!==r;){for(i.push(r),A=Q,r=[],o=j();null!==o;)r.push(o),o=j();if(null!==r)if(44===e.charCodeAt(Q)?(o=",",Q++):(o=null,0===N&&n('","')),o=null!==o?o:"",null!==o){for(s=[],a=j();null!==a;)s.push(a),a=j();null!==s?(a=g(),null!==a?r=[r,o,s,a]:(r=null,Q=A)):(r=null,Q=A)}else r=null,Q=A;else r=null,Q=A}null!==i?t=[t,i]:(t=null,Q=c)}else t=null,Q=c;return null!==t&&(t=function(t,e,i){for(var n=e,r=0;i.length>r;++r)n=_(n,i[r][3]);return n}(l,t[0],t[1])),null===t&&(Q=l),t}function p(){var t,i,r,o,s,a,l,c;if(a=Q,l=Q,c=Q,"--"===e.substr(Q,2)?(t="--",Q+=2):(t=null,0===N&&n('"--"')),null!==t?(i=function(){return J}(Q)?null:"",null!==i?t=[t,i]:(t=null,Q=c)):(t=null,Q=c),null===t&&(c=Q,"->"===e.substr(Q,2)?(t="->",Q+=2):(t=null,0===N&&n('"->"')),null!==t?(i=function(){return J}(Q)?"":null,null!==i?t=[t,i]:(t=null,Q=c)):(t=null,Q=c)),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(r=m(),null!==r){for(o=[],s=j();null!==s;)o.push(s),s=j();null!==o?(s=p(),s=null!==s?s:"",null!==s?t=[t,i,r,o,s]:(t=null,Q=l)):(t=null,Q=l)}else t=null,Q=l;else t=null,Q=l}else t=null,Q=l;return null!==t&&(t=function(t,e,i){for(var n=[e],r=0;i.length>r;++r)n.push(i[r]);return n}(a,t[2],t[4])),null===t&&(Q=a),t}function g(){var t,i,r,o,s,a,l,c;if(a=Q,l=Q,t=E(),null!==t){for(c=Q,i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(61===e.charCodeAt(Q)?(r="=",Q++):(r=null,0===N&&n('"="')),null!==r){for(o=[],s=j();null!==s;)o.push(s),s=j();null!==o?(s=E(),null!==s?i=[i,r,o,s]:(i=null,Q=c)):(i=null,Q=c)}else i=null,Q=c;else i=null,Q=c;i=null!==i?i:"",null!==i?t=[t,i]:(t=null,Q=l)}else t=null,Q=l;return null!==t&&(t=function(t,e,i){var n={};return n[e]=i[3],n}(a,t[0],t[1])),null===t&&(Q=a),t}function m(){var t,e;return t=u(),null===t&&(e=Q,t=v(),null!==t&&(t=function(t,e){return{type:"node",id:e,attrs:{}}}(e,t)),null===t&&(Q=e)),t}function v(){var t,e,i,n,r;if(n=Q,r=Q,t=E(),null!==t){for(e=[],i=j();null!==i;)e.push(i),i=j();null!==e?(i=y(),i=null!==i?i:"",null!==i?t=[t,e,i]:(t=null,Q=r)):(t=null,Q=r)}else t=null,Q=r;return null!==t&&(t=function(t,e){return e}(n,t[0])),null===t&&(Q=n),t}function y(){var t,i,r,o,s,a,l,c,A;if(c=Q,58===e.charCodeAt(Q)?(t=":",Q++):(t=null,0===N&&n('":"')),null!==t){for(i=[],r=j();null!==r;)i.push(r),r=j();if(null!==i)if(r=E(),null!==r){for(o=[],s=j();null!==s;)o.push(s),s=j();if(null!==o){if(A=Q,58===e.charCodeAt(Q)?(s=":",Q++):(s=null,0===N&&n('":"')),null!==s){for(a=[],l=j();null!==l;)a.push(l),l=j();null!==a?(l=x(),null!==l?s=[s,a,l]:(s=null,Q=A)):(s=null,Q=A)}else s=null,Q=A;s=null!==s?s:"",null!==s?t=[t,i,r,o,s]:(t=null,Q=c)}else t=null,Q=c}else t=null,Q=c;else t=null,Q=c}else t=null,Q=c;return t}function x(){var t;return 110===e.charCodeAt(Q)?(t="n",Q++):(t=null,0===N&&n('"n"')),null===t&&("ne"===e.substr(Q,2)?(t="ne",Q+=2):(t=null,0===N&&n('"ne"')),null===t&&(101===e.charCodeAt(Q)?(t="e",Q++):(t=null,0===N&&n('"e"')),null===t&&("se"===e.substr(Q,2)?(t="se",Q+=2):(t=null,0===N&&n('"se"')),null===t&&(115===e.charCodeAt(Q)?(t="s",Q++):(t=null,0===N&&n('"s"')),null===t&&("sw"===e.substr(Q,2)?(t="sw",Q+=2):(t=null,0===N&&n('"sw"')),null===t&&(119===e.charCodeAt(Q)?(t="w",Q++):(t=null,0===N&&n('"w"')),null===t&&("nw"===e.substr(Q,2)?(t="nw",Q+=2):(t=null,0===N&&n('"nw"')),null===t&&(99===e.charCodeAt(Q)?(t="c",Q++):(t=null,0===N&&n('"c"')),null===t&&(95===e.charCodeAt(Q)?(t="_",Q++):(t=null,0===N&&n('"_"'))))))))))),t}function E(){var t,i,r,o,s,a,l,c,A;if(N++,a=Q,l=Q,/^[a-zA-Z\u0200-\u0377_]/.test(e.charAt(Q))?(t=e.charAt(Q),Q++):(t=null,0===N&&n("[a-zA-Z\\u0200-\\u0377_]")),null!==t){for(i=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==r;)i.push(r),/^[a-zA-Z\u0200-\u0377_0-9]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==i?t=[t,i]:(t=null,Q=l)}else t=null,Q=l;if(null!==t&&(t=function(t,e,i){return e+i.join("")}(a,t[0],t[1])),null===t&&(Q=a),null===t){if(a=Q,l=Q,45===e.charCodeAt(Q)?(t="-",Q++):(t=null,0===N&&n('"-"')),t=null!==t?t:"",null!==t)if(46===e.charCodeAt(Q)?(i=".",Q++):(i=null,0===N&&n('"."')),null!==i){if(/^[0-9]/.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=null,0===N&&n("[0-9]")),null!==o)for(r=[];null!==o;)r.push(o),/^[0-9]/.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=null,0===N&&n("[0-9]"));else r=null;null!==r?t=[t,i,r]:(t=null,Q=l)}else t=null,Q=l;else t=null,Q=l;if(null!==t&&(t=function(t,e,i,n){return e+i+n.join("")}(a,t[0],t[1],t[2])),null===t&&(Q=a),null===t){if(a=Q,l=Q,45===e.charCodeAt(Q)?(t="-",Q++):(t=null,0===N&&n('"-"')),t=null!==t?t:"",null!==t){if(/^[0-9]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[0-9]")),null!==r)for(i=[];null!==r;)i.push(r),/^[0-9]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[0-9]"));else i=null;if(null!==i){if(c=Q,46===e.charCodeAt(Q)?(r=".",Q++):(r=null,0===N&&n('"."')),null!==r){for(o=[],/^[0-9]/.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=null,0===N&&n("[0-9]"));null!==s;)o.push(s),/^[0-9]/.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=null,0===N&&n("[0-9]"));null!==o?r=[r,o]:(r=null,Q=c)}else r=null,Q=c;r=null!==r?r:"",null!==r?t=[t,i,r]:(t=null,Q=l)}else t=null,Q=l}else t=null,Q=l;if(null!==t&&(t=function(t,e,i,n){return e+i.join("")+(n[0]||"")+(n[1]||[]).join("")}(a,t[0],t[1],t[2])),null===t&&(Q=a),null===t){if(a=Q,l=Q,34===e.charCodeAt(Q)?(t='"',Q++):(t=null,0===N&&n('"\\""')),null!==t){for(i=[],c=Q,'\\"'===e.substr(Q,2)?(r='\\"',Q+=2):(r=null,0===N&&n('"\\\\\\""')),null!==r&&(r=function(){return'"'}(c)),null===r&&(Q=c),null===r&&(c=Q,A=Q,92===e.charCodeAt(Q)?(r="\\",Q++):(r=null,0===N&&n('"\\\\"')),null!==r?(/^[^"]/.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=null,0===N&&n('[^"]')),null!==o?r=[r,o]:(r=null,Q=A)):(r=null,Q=A),null!==r&&(r=function(t,e){return"\\"+e}(c,r[1])),null===r&&(Q=c),null===r&&(/^[^"]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n('[^"]'))));null!==r;)i.push(r),c=Q,'\\"'===e.substr(Q,2)?(r='\\"',Q+=2):(r=null,0===N&&n('"\\\\\\""')),null!==r&&(r=function(){return'"'}(c)),null===r&&(Q=c),null===r&&(c=Q,A=Q,92===e.charCodeAt(Q)?(r="\\",Q++):(r=null,0===N&&n('"\\\\"')),null!==r?(/^[^"]/.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=null,0===N&&n('[^"]')),null!==o?r=[r,o]:(r=null,Q=A)):(r=null,Q=A),null!==r&&(r=function(t,e){return"\\"+e}(c,r[1])),null===r&&(Q=c),null===r&&(/^[^"]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n('[^"]'))));null!==i?(34===e.charCodeAt(Q)?(r='"',Q++):(r=null,0===N&&n('"\\""')),null!==r?t=[t,i,r]:(t=null,Q=l)):(t=null,Q=l)}else t=null,Q=l;null!==t&&(t=function(t,e){return e.join("")}(a,t[1])),null===t&&(Q=a)}}}return N--,0===N&&null===t&&n("identifier"),t}function C(){var t,i;return i=Q,"node"===e.substr(Q,4).toLowerCase()?(t=e.substr(Q,4),Q+=4):(t=null,0===N&&n('"node"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function b(){var t,i;return i=Q,"edge"===e.substr(Q,4).toLowerCase()?(t=e.substr(Q,4),Q+=4):(t=null,0===N&&n('"edge"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function k(){var t,i;return i=Q,"graph"===e.substr(Q,5).toLowerCase()?(t=e.substr(Q,5),Q+=5):(t=null,0===N&&n('"graph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function w(){var t,i;return i=Q,"digraph"===e.substr(Q,7).toLowerCase()?(t=e.substr(Q,7),Q+=7):(t=null,0===N&&n('"digraph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function I(){var t,i;return i=Q,"subgraph"===e.substr(Q,8).toLowerCase()?(t=e.substr(Q,8),Q+=8):(t=null,0===N&&n('"subgraph"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function B(){var t,i;return i=Q,"strict"===e.substr(Q,6).toLowerCase()?(t=e.substr(Q,6),Q+=6):(t=null,0===N&&n('"strict"')),null!==t&&(t=function(t,e){return e.toLowerCase()}(i,t)),null===t&&(Q=i),t}function S(){var t,e;return t=k(),null===t&&(e=Q,t=w(),null!==t&&(t=function(t,e){return J="digraph"===e,e}(e,t)),null===t&&(Q=e)),t}function R(){var t,i;if(N++,/^[ \t\r\n]/.test(e.charAt(Q))?(i=e.charAt(Q),Q++):(i=null,0===N&&n("[ \\t\\r\\n]")),null!==i)for(t=[];null!==i;)t.push(i),/^[ \t\r\n]/.test(e.charAt(Q))?(i=e.charAt(Q),Q++):(i=null,0===N&&n("[ \\t\\r\\n]"));else t=null;return N--,0===N&&null===t&&n("whitespace"),t}function T(){var t,i,r,o,s,a,l;if(N++,s=Q,"//"===e.substr(Q,2)?(t="//",Q+=2):(t=null,0===N&&n('"//"')),null!==t){for(i=[],/^[^\n]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[^\\n]"));null!==r;)i.push(r),/^[^\n]/.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=null,0===N&&n("[^\\n]"));null!==i?t=[t,i]:(t=null,Q=s)}else t=null,Q=s;if(null===t)if(s=Q,"/*"===e.substr(Q,2)?(t="/*",Q+=2):(t=null,0===N&&n('"/*"')),null!==t){for(i=[],a=Q,l=Q,N++,"*/"===e.substr(Q,2)?(r="*/",Q+=2):(r=null,0===N&&n('"*/"')),N--,null===r?r="":(r=null,Q=l),null!==r?(e.length>Q?(o=e.charAt(Q),Q++):(o=null,0===N&&n("any character")),null!==o?r=[r,o]:(r=null,Q=a)):(r=null,Q=a);null!==r;)i.push(r),a=Q,l=Q,N++,"*/"===e.substr(Q,2)?(r="*/",Q+=2):(r=null,0===N&&n('"*/"')),N--,null===r?r="":(r=null,Q=l),null!==r?(e.length>Q?(o=e.charAt(Q),Q++):(o=null,0===N&&n("any character")),null!==o?r=[r,o]:(r=null,Q=a)):(r=null,Q=a);
null!==i?("*/"===e.substr(Q,2)?(r="*/",Q+=2):(r=null,0===N&&n('"*/"')),null!==r?t=[t,i,r]:(t=null,Q=s)):(t=null,Q=s)}else t=null,Q=s;return N--,0===N&&null===t&&n("comment"),t}function j(){var t;return t=R(),null===t&&(t=T()),t}function M(t){t.sort();for(var e=null,i=[],n=0;t.length>n;n++)t[n]!==e&&(i.push(t[n]),e=t[n]);return i}function F(){for(var t=1,i=1,n=!1,r=0;Math.max(Q,P)>r;r++){var o=e.charAt(r);"\n"===o?(n||t++,i=1,n=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,i=1,n=!0):(i++,n=!1)}return{line:t,column:i}}function _(t,e){var i={};for(var n in t)i[n]=t[n];for(var n in e)i[n]=e[n];return i}var V={start:r,stmtList:o,stmt:s,attrStmt:a,inlineAttrStmt:l,nodeStmt:c,edgeStmt:A,subgraphStmt:u,attrList:h,attrListBlock:d,aList:f,edgeRHS:p,idDef:g,nodeIdOrSubgraph:m,nodeId:v,port:y,compassPt:x,id:E,node:C,edge:b,graph:k,digraph:w,subgraph:I,strict:B,graphType:S,whitespace:R,comment:T,_:j};if(void 0!==i){if(void 0===V[i])throw Error("Invalid rule name: "+t(i)+".")}else i="start";var J,Q=0,N=0,P=0,L=[],U=V[i]();if(null===U||Q!==e.length){var z=Math.max(Q,P),O=e.length>z?e.charAt(z):null,D=F();throw new this.SyntaxError(M(L),O,z,D.line,D.column)}return U},toSource:function(){return this._source}};return e.SyntaxError=function(e,i,n,r,o){function s(e,i){var n,r;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=i?t(i):"end of input","Expected "+n+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=i,this.message=s(e,i),this.offset=n,this.line=r,this.column=o},e.SyntaxError.prototype=Error.prototype,e}()})(),joint.layout.DirectedGraph={layout:function(t,e){e=e||{};var i=this._prepareData(t);dagre.layout().nodes(i.nodeData).edges(i.edgeData).debugLevel(3).run(),_.each(i.nodeData,function(e){t.get("cells").get(e.id).set("position",{x:e.dagre.x,y:e.dagre.y})}),e.setLinkVertices&&_.each(i.edgeData,function(e){t.get("cells").get(e.id).set("vertices",e.dagre.points)})},_prepareData:function(){var t=[],e=[],i={},n={};return graph.get("cells").each(function(e){if(e instanceof joint.dia.Element&&!i[e.id]){var n={id:e.id,inEdges:[],outEdges:[],width:e.get("size").width,height:e.get("size").height};t.push(n),i[e.id]=n}}),graph.get("cells").each(function(t){if(t instanceof joint.dia.Link){var r,o=t.get("source").id,s=t.get("target").id,a=i[o],l=i[s];n[t.id]?r=n[t.id]:(r={id:t.id,source:a,target:l,label:"fooedge"},n[t.id]=r,e.push(r)),_.contains(a.outEdges,r)||a.outEdges.push(r),_.contains(l.inEdges,r)||l.inEdges.push(r)}}),{nodeData:t,edgeData:e}}};
